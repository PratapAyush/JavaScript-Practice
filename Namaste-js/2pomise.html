<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
<script>
    //  PROMISE-->> Promise is an object representing eventful completion or failure of an async operation

// const githubapi = "https://api.github.com/users"

// const user = fetch(githubapi)
// console.log(user)

// coonsumer

 
   const cart = ["A","B","c"]

   // consumer of promise
  const promise = createOrder(cart)
  console.log(promise)

  promise.then(function(res){
    // when promise is successful,
    console.log("res",res)
    // return statement should also be there in after chain, it will give good manner of writing code
    // Also it will return that particular thing to the next chain that we have 
    return res
  })
  .then(function(orderId){
   // console.log("order",orderId)
   return procedToPayment(orderId)
  })
  // chaining to catch resolve and reject for procedToPayment function
  .then(function(paymentInfo){
    console.log(paymentInfo)
  })
  


  // always write what happens when promise will be rejected as it is more graceful way of handling error
  .catch(function (err){
    console.log(err.message)
  })



// Producer

function createOrder(cart) {
     const pr = new Promise(function(resolve,reject){
        if(!validateCart(cart)){
            const err = new Error("cart is invalid")
            reject(err)
        }
        const id=1234
        if(id){
            setTimeout(function(){
                resolve(id)

            },5000)
        }
     })

     return pr
}

function validateCart(cart){
    return true
}

function procedToPayment(orderId){
  return new Promise(function (resolve,reject){
    resolve("proceedToPaymentDone")
  })
}


//













</script>
</html>
